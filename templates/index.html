<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Clothes Classification</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="author" content="" />

    <!-- Facebook and Twitter integration -->
    <meta property="og:title" content=""/>
    <meta property="og:image" content=""/>
    <meta property="og:url" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:description" content=""/>
    <meta name="twitter:title" content="" />
    <meta name="twitter:image" content="" />
    <meta name="twitter:url" content="" />
    <meta name="twitter:card" content="" />

    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">

    <!-- Animate.css -->
    <link rel="stylesheet" href="{{url_for('static', filename='css/animate.css')}}">
    <!-- Icomoon Icon Fonts-->
    <link rel="stylesheet" href="{{url_for('static', filename='css/icomoon.css')}}">
    <!-- Bootstrap  -->
    <link rel="stylesheet" href="{{url_for('static', filename='css/bootstrap.css')}}">

    <!-- Magnific Popup -->
    <link rel="stylesheet" href="{{url_for('static', filename='css/magnific-popup.css')}}">

    <!-- Flexslider  -->
    <link rel="stylesheet" href="{{url_for('static', filename='css/flexslider.css')}}">

    <!-- Owl Carousel -->
    <link rel="stylesheet" href="{{url_for('static', filename='css/owl.carousel.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/owl.theme.default.min.css')}}">

    <!-- Date Picker -->
    <link rel="stylesheet" href="{{url_for('static', filename='css/bootstrap-datepicker.css')}}">
    <!-- Flaticons  -->
    <link rel="stylesheet" href="{{url_for('static', filename='fonts/flaticon/font/flaticon.css')}}">

    <!-- Theme style  -->
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}">


    <!-- Modernizr JS -->
    <script src="{{url_for('static', filename='js/modernizr-2.6.2.min.js')}}" type="text/javascript"></script>

    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
    <script src="{{url_for('static', filename='js/respond.min.js')}}"></script>
    <![endif]-->
    <!--File picker-->
    <link rel="stylesheet" href="{{url_for('static', filename='css/filepicker.default.css')}}">
</head>
<body>

<div class="colorlib-loader"></div>

<div id="page">
    <aside id="colorlib-hero" class="breadcrumbs">
        <div class="flexslider">
            <ul class="slides">
                <li style="background-image:
			   			url({{url_for('static', filename='images/cover-img-1.jpg')}});">
                    <div class="overlay"></div>
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-6 col-md-offset-3 col-sm-12 col-xs-12 slider-text">
                                <div class="slider-text-inner text-center">
                                    <h1>Clothes Classification</h1>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </aside>

    <br><br><br>

    <div class="colorlib-shop">
        <div class="container">
            <div class="row row-pb-lg">
                <div class="col-md-12 col-md-offset-1">
                    <div class="product-detail-wrap">
                        <div class="row">
                            <div class="col-md-7 tabulation">
                                <ul class="nav nav-tabs">
                                    <li class="active"><a data-toggle="tab" href="#upload">Upload</a></li>
                                    <li><a data-toggle="tab" href="#download">Download</a></li>

                                </ul>
                                <div class="tab-content">
                                    <div id="upload" class="tab-pane fade in active">
                                        <div class="product-entry">
                                            <div class="product-img">
                                                <!--Upload file-->
                                                <form id="upload-file" method="POST" enctype="multipart/form-data">
                                                    <input data-label="Upload" class="filepicker" multiple="" type="file"
                                                           name="file" id="origin_picture"
                                                           accept="image/png, image/jpeg, image/jpg"

                                                    >
                                                </form>
                                            </div>
                                        </div>

                                    </div>
                                    <div id="download" class="tab-pane fade">

                                        <div class="product-entry">
                                            <div class="product-img">
                                                <!--download-->
                                                <div class="row form-group">
                                                    <div class="row">
                                                        <input type="text" name="picture_url" class="form-control input-number" placeholder="URL OF IMAGE" id="picture_url">
                                                        <img src="" id="image_downloaded">
                                                    </div>

                                                    <div class="row">
                                                        <!--<div class="col-md-4"></div>-->
                                                        <div class="col-md-4">
                                                            <button class="btn btn-primary" id="download_image">Download</button>
                                                        </div>
                                                        <!--<div class="col-md-4"></div>-->
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <!--Van Anh
                            <div class="col-md-5">
                                <div class="product-entry">
                                    <div class="product-img">

                                        <div class="row form-group">

                                            <div class="col-md-3">
                                                <button class="btn btn-primary">Download
                                                </button>
                                            </div>
                                            <div class="col-md-9">
                                                <input type="text" name="picture_url" class="form-control input-number" placeholder="link download">
                                            </div>
                                        </div>

                                        <input data-label="Upload" class="filepicker" multiple="" type="file"
                                            name="origin_picture" id="origin_picture"
                                            accept="image/png, image/jpeg, image/jpg"
                                        >

                                    </div>
                                </div>
                            </div>-->
                            <div class="col-md-5">
                                <div class="desc">
                                    <h2>Label</h2>
                                    <div class="row">
                                        <ul class="list-group col-md-5">
                                            <li class="list-group-item"><span class="label label-primary" style="font-size: 150%">Camo</span></li>
                                            <li class="list-group-item"><span class="label label-info" style="font-size: 150%">Baroque</span></li>
                                            <li class="list-group-item"><span class="label label-success" style="font-size: 150%">Color block</span></li>
                                            <li class="list-group-item"><span class="label label-danger" style="font-size: 150%">Leopard</span></li>
                                            <li class="list-group-item"><span class="label label-warning" style="font-size: 150%">Solid color</span></li>
                                        </ul>
                                    </div>
                                    <br><br>
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th scope="col">model</th>
                                            <th scope="col">Label</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td><span class="badge badge-success" style="font-size: 100%">CNN+SVM</span></td>
                                            <td id="svm"></td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge badge-success" style="font-size: 100%">CNN+KNN</span></td>
                                            <td id="knn"></td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge badge-success" style="font-size: 100%">CNN</span></td>
                                            <td id="cnn"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                    <p>
                                        <a href="javascript:void(0)" class="btn btn-primary btn-addtocart" id="classify">Classify</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="gototop js-top">
    <a href="#" class="js-gotop"><i class="icon-arrow-up2"></i></a>
</div>

<!-- jQuery -->
<script src="{{url_for('static', filename='js/jquery.min.js')}}"></script>
<!-- jQuery Easing -->
<script src="{{url_for('static', filename='js/jquery.easing.1.3.js')}}"></script>
<!-- Bootstrap -->
<script src="{{url_for('static', filename='js/bootstrap.min.js')}}"></script>
<!-- Waypoints -->
<script src="{{url_for('static', filename='js/jquery.waypoints.min.js')}}"></script>
<!-- Flexslider -->
<script src="{{url_for('static', filename='js/jquery.flexslider-min.js')}}"></script>
<!-- Owl carousel -->
<script src="{{url_for('static', filename='js/owl.carousel.min.js')}}"></script>
<!-- Magnific Popup -->
<script src="{{url_for('static', filename='js/jquery.magnific-popup.min.js')}}"></script>
<script src="{{url_for('static', filename='js/magnific-popup-options.js')}}"></script>
<!-- Date Picker -->
<script src="{{url_for('static', filename='js/bootstrap-datepicker.js')}}"></script>
<!-- Stellar Parallax -->
<script src="{{url_for('static', filename='js/jquery.stellar.min.js')}}"></script>
<!-- Main -->
<script src="{{url_for('static', filename='js/main.js')}}"></script>
<!-- File picker JS -->
<script src="{{url_for('static', filename='js/jquery.filepicker.js')}}" type="text/javascript"></script>
<script>
	$(function() {
    $("input[type='file'].filepicker").filepicker();

    $("#origin_picture").change(function(e) {
        var form_data = new FormData($('#upload-file')[0]);
        $.ajax({
            type: 'POST',
            url: '/upload_file',
            data: form_data,
            contentType: false,
            cache: false,
            processData: false,
            success: function(data) {
                console.log(data);
            },
        });
    });

    $("#classify").click(function() {
        $.post('/query', {}, function(result){
            if ('error' in result) {
                alert(result['error']);
                return 'error'
            }
            function get_type(type) {
                if (type == 'camo') {
                    return '<span class="label label-primary" style="font-size: 120%">Camo</span>';
                } else if (type == 'baroque') {
                    return '<span class="label label-info" style="font-size: 120%">Baroque</span>';
                } else if (type == 'color_block') {
                    return '<span class="label label-success" style="font-size: 120%">Color block</span>';
                } else if (type == 'solid_color') {
                    return '<span class="label label-warning" style="font-size: 120%">Solid color</span>';
                } else if (type == 'leopard') {
                    return '<span class="label label-danger" style="font-size: 120%">Leopard</span>';
                }
                console.log(type);
            }

            console.log(result);
            $('#svm').html(get_type(result['svm']));
            $('#knn').html(get_type(result['knn']));
            $("#cnn").html(get_type(result['cnn']));

        });
    });

    $("#download_image").click(function() {
        var reqData = {
            url: $("#picture_url").val()
        }
        $.post('/download_file', {
                url: $("#picture_url").val()
            }, function(result){
                console.log(result);
                $("#image_downloaded").attr("src",result);
            });

    });

});

	</script>

</body>
</html>

